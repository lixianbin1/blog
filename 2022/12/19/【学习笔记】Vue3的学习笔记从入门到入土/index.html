<!DOCTYPE html>
<html>
  
<head>
  <meta charset="utf-8">
  <meta name="author" content="饿包子" />
  
  
  <title>Vue3的学习笔记从入门到入土 | 饿包子博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="学习笔记,Vue," />
  

  
  <meta name="description" content="Vue 3 是 Vue 当前的最新主版本。它包含了一些 Vue 2 中没有的新特性 (比如 Teleport、Suspense，以及多根元素模板)。同时它也包含了一些与 Vue 2 非兼容性的变更横枪与共山河破，罩袍铁衣啸长歌。荡浊红缨丹心证，铁马金戈逆离合战决">

  
  
    <link rel="icon" href="/blog/images/xian.ico">
    <link rel="apple-touch-icon" href="/blog/images/Logo.png">
  

  
<link rel="stylesheet" href="/blog/css/Awesome.min.css">


  <!-- 引入主CSS -->
  
<link rel="stylesheet" href="/blog/css/index.css">


  <!-- 引入自定义highlightCSS -->
  
<link rel="stylesheet" href="/blog/styles/highlight/a11y-dark.min.css">
<link rel="stylesheet" href="/blog/styles/highlight/index.css">


  
  
<script src="/blog/common/jquery.min.js"></script>


  
    
<script src="/blog/common/MathJax.js"></script>

  

  

  <script>
  // theme-ad's config script
  // it can be used in every script
  
  window.AD_CONFIG = {
    welcome: {"enable":false,"interval":30},
    start_time: "2018-06-10",
    passwords: ["a621ab606db2a11f63edc576a729843b8269250dc324206871d90635ac5e531c", ],
    is_post: true,
    lock: false,
    author: "饿包子",
    share: {"twitter":false,"facebook":false,"weibo":true,"qq":true,"wechat":false},
    mathjax: true,
    page_type: "",
    root: "/blog/"
  };
</script>

  
<script src="/blog/vendor/sha256.min.js"></script>
<script src="/blog/js/auth.js"></script>
<script src="/blog/js/index.js"></script>
<script src="/blog/vendor/qrcode.min.js"></script>


<meta name="generator" content="Hexo 5.4.2"></head>
  <body>
    <canvas id="canvas" style="width: 100vw;height: 100vh;background: #fff;"></canvas>
    <header class="site-header">
  <div class="site-header-brand">
    
      <span class="site-header-brand-title">
        <a href="/blog/">清风逐月</a>
      </span>
    
    
      <span class="site-header-brand-motto"> | 我思故我在</span>
    
  </div>
  <div class="site-header-right">
    <nav class="site-header-navigation">
      
        
          <a href="/blog/" target="_self">主页</a>
        
      
        
          <a href="/blog/archives/" target="_self">归档</a>
        
      
        
          <a href="/blog/tags/" target="_self">标签</a>
        
      
        
          <a href="/blog/categories/" target="_self">分类</a>
        
      
        
          <a class="loginTo" href="/blog/diary/" target="_self">日记</a>
        
      
        
          <a class="loginTo" href="/blog/about/" target="_self">关于</a>
        
      
      <a href="javascript:void(0)" target="_self" id="site-login">Login</a>
    </nav>
    <div class="site-header-btn">
              
        <a href="https://github.com/lixianbin1/" target="_blank" id="site-github">
          <i class="fa fa-github-alt"></i>
        </a>
      
      <a href="javascript:void(0);" id="site-search">
        <i class="fa fa-search"></i>
      </a>
      <a href="javascript:void(0);" id="site-nav-btn">
        <i class="fa fa-ellipsis-v"></i>
      </a>
    </div>
  </div>
</header>
<nav class="table-content" id="site-nav">
  <div class="table-content-title">
    <span>导航</span>
  </div>
  <div class="table-content-main">
    <ol class="toc">
      
        <li class="toc-item">
          <a href="/blog/" target="_self">
            主页
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/archives/" target="_self">
            归档
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/tags/" target="_self">
            标签
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/categories/" target="_self">
            分类
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/diary/" target="_self">
            日记
          </a>
        </li>
      
        <li class="toc-item">
          <a href="/blog/about/" target="_self">
            关于
          </a>
        </li>
      
    </ol>
  </div>
</nav>
<div id="site-process"></div>
    <main>
      
  <!-- passage -->
<div class="passage">
  <div class="passage-meta">
    <span>
      <i class="fa fa-calendar"></i>2022-12-19
    </span>
    
      <span>
        | <a href="/blog/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><i class="fa fa-bookmark"></i>学习笔记</a>
      </span>
    
    
      <span>
        | <i class="fa fa-unlock-alt"></i>UNLOCK
      </span>
    
    <span>
       | <i class="fa fa-calendar"></i>更新时间:2023-2-21 14:21 
    </span>
  </div>
  <h1 class="passage-title">
    Vue3的学习笔记从入门到入土
  </h1>
  
  <article class="passage-article">
    <p>Vue 3 是 Vue 当前的最新主版本。它包含了一些 Vue 2 中没有的新特性 (比如 Teleport、Suspense，以及多根元素模板)。同时它也包含了一些与 Vue 2 非兼容性的变更</p>
<h2 id="简单概念"><a href="#简单概念" class="headerlink" title="简单概念"></a>简单概念</h2><ul>
<li>什么是Vue，什么是单文件组件</li>
</ul>
<p>Vue是基于 HTML、CSS 和 JS 的一套声明式的、组件化的 JavaScript 框架；Vue把 HTML、CSS 和 JS封装在同一个Vue文件里，通过解析模板去进行解析，再通过预处理器去处理。它给我们带来了模板化开发，独立作用域，预处理器等多种优点。</p>
<ul>
<li>什么是模板语法</li>
</ul>
<p>Vue 使用一种基于 HTML 的模板语法，能够声明式地将数据绑定到 DOM 上。通过解析器进行解析</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>文本插值 &#123;&#123; msg &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:text</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span>属性绑定attar<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:</span>[<span class="hljs-attr">attar</span>]=<span class="hljs-string">&quot;text&quot;</span>&gt;</span>动态参数attar<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> @[<span class="hljs-attr">attar</span>]=<span class="hljs-string">&quot;text&quot;</span>&gt;</span>动态方法attar<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre>

<h2 id="简单使用"><a href="#简单使用" class="headerlink" title="简单使用"></a>简单使用</h2><p>vue目前有两种编写方式，你可以使用vue2版本的选项式编写，也可用使用vue3新添加setup函数,文章后面的示例大部分用了setup组合式语法</p>
<pre><code class="hljs js"><span class="hljs-comment">//选项式</span>
<span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;
  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//data数据</span>
    <span class="hljs-keyword">return</span>&#123;
      <span class="hljs-attr">count</span>:<span class="hljs-number">1</span>,
    &#125;
  &#125;,
  <span class="hljs-title function_">mounted</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//生命周期钩子</span>
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>) <span class="hljs-comment">// 1</span>
  &#125;,
&#125;</code></pre>

<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-comment">//组合式</span></span>
<span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref,onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span>
<span class="language-javascript"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>) <span class="hljs-comment">//data数据</span></span>
<span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">()=&gt;</span>&#123; <span class="hljs-comment">//生命周期钩子</span></span>
<span class="language-javascript">  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>) <span class="hljs-comment">// 1</span></span>
<span class="language-javascript">&#125;)</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>

<h3 id="响应式数据-ref-reactive"><a href="#响应式数据-ref-reactive" class="headerlink" title="响应式数据 ref reactive"></a>响应式数据 ref reactive</h3><p><code>ref</code> 和 <code>reactive</code> 是vue3基于组合式api模式下，在 <code>setup</code> 中用于声明的具有响应式的数据的方法, <code>ref</code> 通常用于声明基础类型响应式数据,<code>reactive</code> 用于声明复杂类型响应式数据</p>
<pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, reactive &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(count.<span class="hljs-property">value</span>) <span class="hljs-comment">// 1</span>
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>(&#123; <span class="hljs-attr">count</span>:<span class="hljs-number">1</span> &#125;)
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">count</span>) <span class="hljs-comment">// 1</span></code></pre>

<h3 id="计算属性-computed"><a href="#计算属性-computed" class="headerlink" title="计算属性 computed"></a>计算属性 computed</h3><p>接受一个 <code>getter</code> 函数，返回一个只读的响应式 <code>ref</code> 对象。该 <code>ref</code> 通过 <code>.value</code> 暴露 <code>getter</code> 函数的返回值。它也可以接受一个带有 <code>get</code> 和 <code>set</code> 函数的对象来创建一个可写的 ref 对象</p>
<pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; reactive, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">const</span> state = <span class="hljs-title function_">reactive</span>(&#123;
  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;John Doe&#x27;</span>,
&#125;)
<span class="hljs-keyword">const</span> publish = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123; <span class="hljs-comment">// 只读，赋值会错误</span>
  <span class="hljs-keyword">return</span> state.<span class="hljs-property">name</span> == <span class="hljs-string">&#x27;John Doe&#x27;</span> ? <span class="hljs-string">&#x27;Yes&#x27;</span> : <span class="hljs-string">&#x27;No&#x27;</span>
&#125;)

<span class="hljs-comment">//高级：可编辑计算属性</span>
<span class="hljs-keyword">const</span> fullName = <span class="hljs-title function_">computed</span>(&#123;
  <span class="hljs-title function_">get</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">//getter</span>
    <span class="hljs-keyword">return</span> firstName.<span class="hljs-property">value</span> + <span class="hljs-string">&#x27; &#x27;</span> + lastName.<span class="hljs-property">value</span>
  &#125;,
  <span class="hljs-title function_">set</span>(<span class="hljs-params">newValue</span>) &#123; <span class="hljs-comment">//setter</span>
    [firstName.<span class="hljs-property">value</span>, lastName.<span class="hljs-property">value</span>] = newValue.<span class="hljs-title function_">split</span>(<span class="hljs-string">&#x27; &#x27;</span>)
  &#125;
&#125;)</code></pre>

<h3 id="样式属性-class-style"><a href="#样式属性-class-style" class="headerlink" title="样式属性 :class :style"></a>样式属性 :class :style</h3><p>vue可以通过响应式<code>ref</code> <code>reactive</code>对象给元素对象动态绑定class和属性</p>
<pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;ref,reactive&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">const</span> isActive = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">true</span>)
<span class="hljs-keyword">const</span> classObject = <span class="hljs-title function_">reactive</span>(&#123;
  <span class="hljs-attr">active</span>: <span class="hljs-literal">true</span>
&#125;)
<span class="hljs-keyword">const</span> styleObject = <span class="hljs-title function_">reactive</span>(&#123;
  <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>,
  <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;13px&#x27;</span>
&#125;)

&lt;div :<span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;&#123; active: isActive &#125;&quot;</span>&gt;&lt;/div&gt;
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;classObject&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;styleObject&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span></code></pre>

<h3 id="指令·修饰符-v-text"><a href="#指令·修饰符-v-text" class="headerlink" title="指令·修饰符 v-text"></a>指令·修饰符 v-text</h3><ul>
<li><code>v-once</code> 仅渲染一次</li>
<li><code>v-text</code> 更新元素的文本内容</li>
<li><code>v-html</code> 更新元素的 innerHTML</li>
<li><code>v-pre</code>  跳过该元素及其所有子元素的编译</li>
<li><code>v-cloak</code> 用于隐藏尚未完成编译的 DOM 模板<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-once</span> <span class="hljs-attr">v-text</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-cloak</span> <span class="hljs-attr">v-html</span>=<span class="hljs-string">&quot;innerhtml&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-pre</span>&gt;</span>&#123;&#123;masg&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre></li>
<li><code>v-show</code> 基于表达式值的真假性，来改变元素的 <code>display</code> 来改变可见性</li>
<li><code>v-if</code> 基于表达式值的真假性，来改变元素的是否渲染来改变可见性</li>
<li><code>v-else-if</code> 基于<code>v-if</code> 的链式表达</li>
<li><code>v-else</code> 基于<code>v-if</code> 或 <code>v-else-if</code>的链式表达<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;msg==&#x27;na&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;msg==&#x27;na&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else-if</span>=<span class="hljs-string">&quot;msg==&#x27;ma&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-else</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></code></pre></li>
<li><code>v-for</code> 基于原始数据多次渲染元素或模板块</li>
<li><code>v-memo</code> 基于依赖数组进行优化<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.key&quot;</span> <span class="hljs-attr">v-memo</span>=<span class="hljs-string">&quot;items&quot;</span>&gt;</span>
  &#123;&#123; item.text &#125;&#125;
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></code></pre></li>
<li><code>v-on</code> 给元素绑定事件监听器，缩写符 <code>@</code><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-on:click</span>=<span class="hljs-string">&quot;msg=&#x27;na&#x27;&quot;</span>&gt;</span>&#123;&#123;mag&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">span</span> @<span class="hljs-attr">click.stop</span>=<span class="hljs-string">&quot;msg=&#x27;na&#x27;&quot;</span>&gt;</span>&#123;&#123;mag&#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>

<span class="hljs-comment">&lt;!-- .stop ---- 调用 event.stopPropagation() --&gt;</span>
<span class="hljs-comment">&lt;!-- .prevent - 调用 event.preventDefault() --&gt;</span>
<span class="hljs-comment">&lt;!-- .capture - 在捕获模式添加事件监听器 --&gt;</span>
<span class="hljs-comment">&lt;!-- .self ---- 只有事件从元素本身发出才触发处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .&#123;keyAlias&#125; - 只在某些按键下触发处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .once ---- 最多触发一次处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .left ---- 只在鼠标左键事件触发处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .right --- 只在鼠标右键事件触发处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .middle -- 只在鼠标中键事件触发处理函数 --&gt;</span>
<span class="hljs-comment">&lt;!-- .passive - 通过 &#123; passive: true &#125; 附加一个 DOM 事件 --&gt;</span></code></pre></li>
<li><code>v-bind</code> 给元素绑定事件监听器，缩写符 <code>:</code><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-bind:title</span>=<span class="hljs-string">&quot;msg&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>

<span class="hljs-comment">&lt;!-- .camel - 将短横线命名的 attribute 转变为驼峰式命名 --&gt;</span>
<span class="hljs-comment">&lt;!-- .prop -- 强制绑定为 DOM property （3.2+） --&gt;</span>
<span class="hljs-comment">&lt;!-- .attr -- 强制绑定为 DOM attribute （3.2+） --&gt;</span></code></pre></li>
<li><code>v-model</code> 在表单输入元素或组件上创建双向绑定<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;msg&quot;</span>/&gt;</span>

<span class="hljs-comment">&lt;!-- .lazy - 监听 change 事件而不是 input --&gt;</span>
<span class="hljs-comment">&lt;!-- .number - 将输入的合法字符串转为数字 --&gt;</span>
<span class="hljs-comment">&lt;!-- .trim - 移除输入内容两端空格 --&gt;</span></code></pre></li>
</ul>
<h3 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h3><p>指令比 autofocus attribute 更有用，因为它不仅仅可以在页面加载完成后生效，还可以在 Vue 动态插入元素后生效</p>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span>
<span class="language-javascript"><span class="hljs-comment">// 在模板中启用 v-focus; 以v开头的驼峰式命名的变量都可以被用作一个自定义指令</span></span>
<span class="language-javascript"><span class="hljs-keyword">const</span> vFocus = &#123;</span>
<span class="language-javascript">  <span class="hljs-attr">mounted</span>: <span class="hljs-function">(<span class="hljs-params">el</span>) =&gt;</span> el.<span class="hljs-title function_">focus</span>()</span>
<span class="language-javascript">&#125;</span>
<span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-focus</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></code></pre>

<pre><code class="hljs js"><span class="hljs-comment">//全局注册</span>
<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(&#123;&#125;)

<span class="hljs-comment">// 使 v-focus 在所有组件中都可用</span>
app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;focus&#x27;</span>, &#123;
  <span class="hljs-comment">/* ... */</span>
&#125;)</code></pre>


<h3 id="生命周期-Mount"><a href="#生命周期-Mount" class="headerlink" title="生命周期 Mount"></a>生命周期 Mount</h3><p>选项式代码则和Vue2相同，组合式代码和选项式相比，少了 beforeCreate 和 created</p>
<pre><code class="hljs js"><span class="hljs-title function_">onBeforeMount</span>() <span class="hljs-comment">//在组件挂载之前调用</span>
<span class="hljs-title function_">onMounted</span>()     <span class="hljs-comment">//在组件挂载完成后执行</span>

<span class="hljs-title function_">onBeforeUpdate</span>() <span class="hljs-comment">//在组件更新之前执行</span>
<span class="hljs-title function_">onUpdated</span>()      <span class="hljs-comment">//在组件更新完成后执行</span>

<span class="hljs-title function_">onBeforeUnmount</span>()<span class="hljs-comment">//在实例卸载之前执行</span>
<span class="hljs-title function_">onUnmounted</span>()    <span class="hljs-comment">//在实例卸载完成后执行</span>

<span class="hljs-title function_">onActivated</span>()   <span class="hljs-comment">//缓存组件插入时触发</span>
<span class="hljs-title function_">onDeactivated</span>() <span class="hljs-comment">//缓存组件移除时触发</span>

<span class="hljs-title function_">onErrorCaptured</span>() <span class="hljs-comment">//子组件发生错误时执行</span>

<span class="hljs-comment">//（仅开发可用）</span>
<span class="hljs-title function_">onRenderTracked</span>() <span class="hljs-comment">//当组件渲染过程中追踪到响应式依赖时调用</span>
<span class="hljs-title function_">onRenderTriggered</span>() <span class="hljs-comment">//当组件渲染过程中追踪到响应式依赖时调用</span>
<span class="hljs-comment">//（仅SSR可用）</span>
<span class="hljs-title function_">onServerPrefetch</span>() <span class="hljs-comment">//在组件实例在服务器上被渲染之前调用 </span></code></pre>

<h3 id="侦听器-watch"><a href="#侦听器-watch" class="headerlink" title="侦听器 watch"></a>侦听器 watch</h3><p>直接给 watch() 传入一个响应式对象，会隐式地创建一个深层侦听器</p>
<pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, watch,watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>
<span class="hljs-keyword">const</span> question = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;&#x27;</span>)
<span class="hljs-comment">// 监听question的变化</span>
<span class="hljs-title function_">watch</span>(question, <span class="hljs-title function_">async</span> (<span class="hljs-keyword">new</span>, old) =&gt; &#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-keyword">new</span>, old)
&#125;
<span class="hljs-comment">// 加入 immediate 会立即执行一遍</span>
<span class="hljs-comment">// ,&#123; immediate: true &#125;</span>
)


<span class="hljs-title function_">watchEffect</span>(<span class="hljs-title function_">async</span> () =&gt; &#123;
  <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(
    <span class="hljs-string">`https://xxx/todos/<span class="hljs-subst">$&#123;todoId.value&#125;</span>`</span>
  )
  data.<span class="hljs-property">value</span> = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>()
&#125;)</code></pre>


<h3 id="依赖注入-provide"><a href="#依赖注入-provide" class="headerlink" title="依赖注入 provide"></a>依赖注入 provide</h3><pre><code class="hljs js"><span class="hljs-comment">//祖父组件</span>
<span class="hljs-keyword">import</span> &#123;ref,provide&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-comment">//提供监听值</span>
<span class="hljs-keyword">const</span> testValue = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)
<span class="hljs-title function_">provide</span>(<span class="hljs-string">&#x27;testKey&#x27;</span>,testValue)

<span class="hljs-title function_">setTimeOut</span>(<span class="hljs-function">()=&gt;</span>&#123;
  testValue.<span class="hljs-property">value</span> = <span class="hljs-number">2</span>
&#125;)</code></pre>

<pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123;inject&#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-comment">//监听值</span>
<span class="hljs-title function_">inject</span>(<span class="hljs-string">&#x27;testKey&#x27;</span>,<span class="hljs-function">(<span class="hljs-params">value</span>)=&gt;</span>&#123;
  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)
&#125;)</code></pre>


<h3 id="组件注册"><a href="#组件注册" class="headerlink" title="组件注册"></a>组件注册</h3><p>全局引用</p>
<pre><div class="caption"><span>main.js</span></div><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>

<span class="hljs-keyword">const</span> app = <span class="hljs-title function_">createApp</span>(&#123;&#125;)

app.<span class="hljs-title function_">component</span>(
  <span class="hljs-comment">// 注册的名字</span>
  <span class="hljs-string">&#x27;MyComponent&#x27;</span>,
  <span class="hljs-comment">// 组件的实现</span>
  &#123;
    <span class="hljs-comment">/* ... */</span>
  &#125;
)</code></pre>
<p>而在setup中，引入则无需注册</p>
<pre><code class="hljs vue">&lt;script setup&gt;
import ComponentA from &#x27;./ComponentA.vue&#x27;
&lt;/script&gt;

&lt;template&gt;
  &lt;ComponentA /&gt;
&lt;/template&gt;</code></pre>

<h3 id="内置组件"><a href="#内置组件" class="headerlink" title="内置组件"></a>内置组件</h3><ul>
<li>Transition 内置动画，通过v-if进行设置</li>
</ul>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">Transition</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;show&quot;</span>&gt;</span>hello<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">Transition</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-class">.v-enter-active</span>,</span>
<span class="language-css"><span class="hljs-selector-class">.v-leave-active</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">transition</span>: opacity <span class="hljs-number">0.5s</span> ease;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-class">.v-enter-from</span>,</span>
<span class="language-css"><span class="hljs-selector-class">.v-leave-to</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre>

<ul>
<li>TransitionGroup 是一个内置组件，用于对 v-for 列表中的元素或组件的插入、移除和顺序改变添加动画效果。</li>
</ul>
<pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">TransitionGroup</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;list&quot;</span> <span class="hljs-attr">tag</span>=<span class="hljs-string">&quot;ul&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in items&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span>
    &#123;&#123; item &#125;&#125;
  <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">TransitionGroup</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span>
<span class="language-css"><span class="hljs-selector-class">.list-enter-active</span>,</span>
<span class="language-css"><span class="hljs-selector-class">.list-leave-active</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span> ease;</span>
<span class="language-css">&#125;</span>
<span class="language-css"><span class="hljs-selector-class">.list-enter-from</span>,</span>
<span class="language-css"><span class="hljs-selector-class">.list-leave-to</span> &#123;</span>
<span class="language-css">  <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span>
<span class="language-css">  <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateX</span>(<span class="hljs-number">30px</span>);</span>
<span class="language-css">&#125;</span>
<span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></code></pre>

<ul>
<li>KeepAlive 在多个组件间动态切换时缓存被移除的组件实例</li>
</ul>
<pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 非活跃的组件将会被缓存！ --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">KeepAlive</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;activeComponent&quot;</span> /&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">KeepAlive</span>&gt;</span></code></pre>


<h3 id="组件传值"><a href="#组件传值" class="headerlink" title="组件传值"></a>组件传值</h3><p><code>props</code></p>
<pre><div class="caption"><span>amp.vue</span></div><code class="hljs js"><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>([<span class="hljs-string">&#x27;foo&#x27;</span>])
<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(props.<span class="hljs-property">foo</span>)
<span class="hljs-comment">// 或者</span>
<span class="hljs-title function_">defineProps</span>(&#123;
  <span class="hljs-attr">title</span>: <span class="hljs-title class_">String</span>,
  <span class="hljs-attr">likes</span>: <span class="hljs-title class_">Number</span>
&#125;)</code></pre>

<p><code>$emit</code></p>
<pre><code class="hljs js"><span class="hljs-keyword">const</span> emit = <span class="hljs-title function_">defineEmits</span>(&#123;
  <span class="hljs-comment">// 没有校验</span>
  <span class="hljs-attr">click</span>: <span class="hljs-literal">null</span>,

  <span class="hljs-comment">// 校验 submit 事件</span>
  <span class="hljs-attr">submit</span>: <span class="hljs-function">(<span class="hljs-params">&#123; email, password &#125;</span>) =&gt;</span> &#123;
    <span class="hljs-keyword">if</span> (email &amp;&amp; password) &#123;
      <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>
    &#125; <span class="hljs-keyword">else</span> &#123;
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;Invalid submit event payload!&#x27;</span>)
      <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>
    &#125;
  &#125;
&#125;)

<span class="hljs-keyword">function</span> <span class="hljs-title function_">submitForm</span>(<span class="hljs-params">email, password</span>) &#123;
  <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;submit&#x27;</span>, &#123; email, password &#125;)
&#125;</code></pre>



<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><h3 id="ref-和-reactive-的区别"><a href="#ref-和-reactive-的区别" class="headerlink" title="ref 和 reactive 的区别"></a>ref 和 reactive 的区别</h3><p>reactive：(1)它的响应式是更加‘深层次’的，底层本质是将传入的数据包装成一个Proxy。(2)参数必须是对象或者数组，如果要让对象的某个元素实现响应式时比较麻烦。需要使用toRefs (3)更适合复杂对象</p>
<p>ref：(1)函数参数可以是基本数据类型，也可以接受对象类型。(2)如果参数是对象类型时，其实底层的本质还是reactive,系统会自动根据我们给ref传入的值转换成(3)更适合简单类型</p>
  </article>
  <aside class="table-content" id="site-toc">
  <div class="table-content-title">
    <i class="fa fa-arrow-right fa-lg" id="site-toc-hide-btn"></i>
    <span>目录</span>
  </div>
  <div class="table-content-main">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E6%A6%82%E5%BF%B5"><span class="toc-text">简单概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-text">简单使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE-ref-reactive"><span class="toc-text">响应式数据 ref reactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7-computed"><span class="toc-text">计算属性 computed</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E5%BC%8F%E5%B1%9E%E6%80%A7-class-style"><span class="toc-text">样式属性 :class :style</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%C2%B7%E4%BF%AE%E9%A5%B0%E7%AC%A6-v-text"><span class="toc-text">指令·修饰符 v-text</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8C%87%E4%BB%A4"><span class="toc-text">自定义指令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F-Mount"><span class="toc-text">生命周期 Mount</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8-watch"><span class="toc-text">侦听器 watch</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5-provide"><span class="toc-text">依赖注入 provide</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E6%B3%A8%E5%86%8C"><span class="toc-text">组件注册</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%BB%84%E4%BB%B6"><span class="toc-text">内置组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC"><span class="toc-text">组件传值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98"><span class="toc-text">问题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ref-%E5%92%8C-reactive-%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">ref 和 reactive 的区别</span></a></li></ol></li></ol>
  </div>
</aside>

  
  
    <aside class="passage-copyright">
      <div>本文作者: 饿包子</div>
      
        <div>
          原文链接: 
          <a href="" target="_blank">https://lixianbin1.github.io/blog/2022/12/19/%E3%80%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E3%80%91Vue3%E7%9A%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E5%85%A5%E5%9C%9F/</a>
        </div>
      
      <div>
        版权声明: 本博客所有文章除特别声明外, 均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> 许可协议. 转载请注明出处!
      </div>
    </aside>
  
  
    <div class="passage-tags">
     
      <a href="/blog/tags/Vue/"><i class="fa fa-tags"></i>Vue</a>
    
    </div>
  
</div>

    </main>

    <!-- gitalk评论系统 -->
    
      <div id="gitalk-container"></div>
      <link rel="stylesheet" href="https://unpkg.com/gitalk@latest/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
<script src="https://priesttomb.github.io/js/md5.min.js"></script>
<script type="text/javascript">
    new Gitalk({
        clientID: '8241a8fad9233906dbd6',
        clientSecret: '938605d4f670768b4cb9c9bdec2151bc1287dd29',
        repo: 'blog',
        owner: 'lixianbin1',
        admin: 'lixianbin1',
        id: md5(location.pathname),
        distractionFreeMode: true
    }).render('gitalk-container')
</script>
    

    
<div class="site-footer-wrapper">
  <footer class="site-footer">
    
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">网站推荐</h5>
          
            <span class="site-footer-item">
              <a href="https://tympanus.net/codrops/" target="_blank">Codrops</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">文档教程</h5>
          
            <span class="site-footer-item">
              <a href="https://es6.ruanyifeng.com/" target="_blank">ES6入门</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://developer.mozilla.org/zh-CN/docs/Web" target="_blank">MDN Web文档</a>
            </span>
          
        </div>
      
        <div class="site-footer-col">
          <h5 class="site-footer-title">兴趣前沿</h5>
          
            <span class="site-footer-item">
              <a href="https://threejs.org/" target="_blank">threejs</a>
            </span>
          
            <span class="site-footer-item">
              <a href="https://github.com/justadudewhohacks/face-api.js" target="_blank">face-api</a>
            </span>
          
        </div>
      
    
    <div class="site-footer-info">
      <i class="fa fa-clock-o"></i> 本站已稳定运行<span id="site-time"></span>
    </div>
    
    
      <div class="site-footer-info">
        <i class="fa fa-at"></i> Email: xianbin.me@qq.com
      </div>
    
  </footer>
</div>
    <div id="site-toLogin" style="display:none;">
  <div class="site-toLogin-content">
    <div class="site-toLogin-body" id="site-toLogin-container">
      <div class="close-box">
        <i class="fa fa-close" id="site-layer-close"></i>
      </div>
      <form class="">
        <h2 class="title-login">登录</h2>
        <div class="input-Box">
          <span>Password</span>
          <input class="" type="password" autocomplete="off" tabindex="0" placeholder="Please enter your password" id="Password"/>
        </div>
        <div class="input-Box center">
          <button type="button" class="submit">
            <span>Submit</span>
          </button>
        </div>
        <div class="text">
          <p>Client v1.3.4 Build 20240102</p>
        </div>
      </form>
    </div>
  </div>
</div>
    <div id="site-layer" style="display:none;">
  <div class="site-layer-content">
    <div class="site-layer-header">
      <span class="site-layer-header-title" id="site-layer-title"></span>
      <i class="fa fa-close" id="site-layer-close"></i>
    </div>
    <div class="site-layer-body" id="site-layer-container">
      <div class="site-layer-input" id="site-layer-search" style="display: none;">
        <input type="text">
        <i class="fa fa-search"></i>
      </div>
      
      <div id="site-layer-welcome" style="display:none;"></div>
    </div>
  </div>
</div>
    

<div class="bottom-bar">
  
  
  
  <div class="bottom-bar-right">
    <a href="javascript:void(0);" data-enable="true" id="site-toc-show-btn">
      <i class="fa fa-bars"></i>
    </a>
    <a href="javascript:void(0);" id="site-toggle-share-btn">
      <i class="fa fa-share-alt"></i>
    </a>
    
    <a href="javascript:void(0);" id="back-top-btn">
      <i class="fa fa-chevron-up"></i>
    </a>
  </div>
</div>
    <div id="share-btn">
  
  
  
    <a id="share-btn-weibo" href="javascript:void(0);" target="_blank">
      <i class="fa fa-weibo"></i>
    </a>
  
  
    <a id="share-btn-qq" href="javascript:void(0);" target="_blank">
      <i class="fa fa-qq"></i>
    </a>
  
  
</div>
    





    
  </body>
</html>